# HSE_Databases_HW_1
Домашняя работа №1 по курсу "Базы данных"


## Условие:

Вам поручили разработать базу данных для управления заказами в онлайн-сервисе доставки еды. Система должна обрабатывать создание, изменение и управление статусом заказов, включая выбор блюд, оплату и доставку.

• Определите роли пользователей и действия для каждой роли.

• Определите объекты, в которых будут храниться данные.

• Определите связи между объектами для хранения данных.

• Нарисуйте схему объектной модели (используя любые обозначения, которые вам удобны). Объекты и связи на предыдущих шагах можно сразу обозначать в виде итоговой схемы.

Формат сдачи: Github (например в markdown) или PDF


## 1. Роли пользователей и действия для каждой сущности

### Клиент или посетитель (Customer)
- Регистрация и авторизация в системе.
- Просмотр меню (блюда, категории).
- Добавление/удаление блюд в корзину.
- Оформление заказа (выбор адреса доставки, способа оплаты).
- Отслеживание статуса заказа.
- Оплата заказа (онлайн или при получении).
- Оставление отзывов о блюдах или доставке.

### Ресторатор (Restaurant Manager)
- Управление меню ресторана (добавление, редактирование, удаление блюд).
- Просмотр и обработка поступающих заказов (подтверждение, отклонение).
- Обновление статуса заказа (например, "принят", "готовится", "передан курьеру").
- Управление информацией о ресторане (адрес, время работы, меню).


### Курьер (Courier)
- Просмотр назначенных заказов.
- Обновление статуса доставки (например, "в пути", "доставлен").
- Получение информации о клиенте и адресе доставки.


### Администратор (Admin)
- Управление пользователями (блокировка, редактирование ролей).
- Управление ресторанами (добавление, удаление, редактирование).
- Мониторинг заказов и их статусов.
- Обработка жалоб и отзывов.

## 2. Объекты, в которых будут храниться данные

- **User** (Пользователь):
  - `ID`: Уникальный идентификатор пользователя.
  - `Name`: Имя пользователя.
  - `Email`: Электронная почта.
  - `Password`: Хэш пароля.
  - `Role`: Роль (Customer, RestaurantManager, Courier, Admin).
  - `Phone`: Номер телефона.
  - `Address`: Основной адрес (для клиентов).
 
- **Order** (Заказ):
  - `ID`: Уникальный идентификатор заказа.
  - `CustomerID`: Ссылка на клиента.
  - `RestaurantID`: Ссылка на ресторан.
  - `CourierID`: Ссылка на курьера.
  - `OrderDate`: Дата и время заказа.
  - `Status`: Статус (New, Processing, Cooking, Delivering, Delivered, Cancelled).
  - `TotalAmount`: Общая сумма.
  - `PaymentMethod`: Способ оплаты (Online, Cash).
  - `AddressID`: Ссылка на адрес доставки
 
- **Restaurant** (Ресторан):
  - `ID`: Уникальный идентификатор ресторана.
  - `Name`: Название ресторана.
  - `Address`: Адрес ресторана.
  - `WorkingHours`: Время работы.
  - `Phone`: Контактный телефон.
  - `Description`: Описание ресторана.
  - `ImageURL`: Ссылка на основное изображение ресторана или его логотипа.

- **RestaurantImage** (Изображения ресторана):
  - `ID`: Уникальный идентификатор изображения.
  - `RestaurantID`: Ссылка на ресторан.
  - `ImageURL`: Ссылка на изображение.
  - `Caption`: Описание изображения.
  - `IsPrimary`: Флаг основного изображения.

- **MenuItem** (Блюдо в меню):
  - `ID`: Уникальный идентификатор блюда.
  - `Name`: Название блюда.
  - `Description`: Описание блюда.
  - `Price`: Цена.
  - `Category`: Категория.
  - `RestaurantID`: Ссылка на ресторан.
  - `IsAvailable`: Доступность блюда.
  - `ImageURL`: Ссылка на изображение блюда.

- **OrderItem** (Элемент заказа):
  - `ID`: Уникальный идентификатор элемента.
  - `OrderID`: Ссылка на заказ.
  - `MenuItemID`: Ссылка на блюдо.
  - `Quantity`: Количество.
  - `UnitPrice`: Цена за единицу.
  - `Subtotal`: Итоговая стоимость (Quantity * UnitPrice).
 
- **Payment** (Платёж):
  - `ID`: Уникальный идентификатор платежа.
  - `OrderID`: Ссылка на заказ.
  - `Amount`: Сумма платежа.
  - `Status`: Статус (Pending, Success, Failed).
  - `Method`: Метод оплаты (Card, Cash).
  - `PaymentDate`: Дата и время платежа.


- **Review** (Отзыв):
  - `ID`: Уникальный идентификатор отзыва.
  - `OrderID`: Ссылка на заказ.
  - `RestaurantID`: Ссылка на ресторан.
  - `Rating`: Рейтинг (1-5).
  - `Comment`: Текст отзыва.
  - `ReviewDate`: Дата отзыва.

- **Address** (Адрес):
  - `ID`: Уникальный идентификатор адреса.
  - `UserID`: Ссылка на клиента.
  - `City`: Город.
  - `Street`: Улица.
  - `House`: Номер дома.
  - `Apartment`: Номер квартиры.
  - `Latitude`: Широта (для отображения на карте).
  - `Longitude`: Долгота (для отображения на карте).
 
## 3. Связи между объектами для хранения данных.

- **User -> Order**: Один пользователь (клиент) может иметь много заказов (1:N). Поле `CustomerID` в `Order` ссылается на `ID` в `User`.
- **User -> Address**: Один пользователь может иметь несколько адресов (1:N). Поле `UserID` в `Address` ссылается на `ID` в `User`.
- **Restaurant -> MenuItem**: Один ресторан может иметь много блюд (1:N). Поле `RestaurantID` в `MenuItem` ссылается на `ID` в `Restaurant`.
- **Restaurant -> Order**: Один ресторан обрабатывает много заказов (1:N). Поле `RestaurantID` в `Order` ссылается на `ID` в `Restaurant`.
- **Order -> OrderItem**: Один заказ содержит много элементов (1:N). Поле `OrderID` в `OrderItem` ссылается на `ID` в `Order`.
- **MenuItem -> OrderItem**: Одно блюдо может быть в нескольких элементах заказа (1:N). Поле `MenuItemID` в `OrderItem` ссылается на `ID` в `MenuItem`.
- **Order -> Payment**: Один заказ имеет один платёж (1:1). Поле `OrderID` в `Payment` ссылается на `ID` в `Order`.
- **Order -> Review**: Один заказ может иметь один отзыв (1:1). Поле `OrderID` в `Review` ссылается на `ID` в `Order`.
- **Restaurant -> Review**: Один ресторан может иметь много отзывов (1:N). Поле `RestaurantID` в `Review` ссылается на `ID` в `Restaurant`.
- **Restaurant -> RestaurantImage**: Один ресторан может иметь много изображений (1:N). Поле `RestaurantID` в `RestaurantImage` ссылается на `ID` в `Restaurant`.
- **User (Courier) -> Order**: Один курьер может доставлять много заказов (1:N). Поле `CourierID` в `Order` ссылается на `ID` в `User`.
- **Order -> Address**: Один заказ связан с одним адресом доставки (1:1). Поле AddressID в Order ссылается на ID в Address.

## 4. Схема объектной модели

Схема объектной модели представлена в отдельном файле.
